## README: 商品相關資料的關聯式資料庫設計
![資料庫結構](https://github.com/arthur-kuo/rhino/blob/main/task2/ERD.png)

### 1. **背景與假設**
1. 每一個手機型號可以有多種顏色。
2. 手機殼有不同的類型（例如 MagSafe 兼容和標準類型）。
3. 每一款手機型號對應的手機殼也可以有多種顏色及庫存狀態。
4. 每個手機殼對應的庫存數量是按手機型號、手機殼顏色和類型來區分的。

### 2. **資料庫表格設計**

#### 2.1. `PHONE` (手機)
- **功能**: 儲存手機型號與製造商的資料。
- **正規化**: 已經第三正規化 (3NF)，製造商被拆分成獨立表格。

| 欄位名稱       | 資料型別  | 說明                         |
|----------------|-----------|------------------------------|
| `id`           | INT PK    | 手機的唯一識別碼             |
| `model_name`   | VARCHAR   | 手機型號名稱                 |
| `manufacturer` | INT FK    | 外鍵，指向 `MANUFACTURER` 表  |
| `created_at`   | TIMESTAMP | 手機資料的建立時間           |

索引設計：
- `id` 為主鍵，自動建立索引。
- `manufacturer` 上建構索引，優化查詢某製造商下所有手機的性能。

#### 2.2. `TYPE` (手機殼類型)
- **功能**: 儲存手機殼的類型資訊（如 MagSafe 兼容、標準）。
- **正規化**: 類型分成單獨表格，確保類型數據不重複。

| 欄位名稱      | 資料型別  | 說明                         |
|---------------|-----------|------------------------------|
| `id`          | INT PK    | 類型的唯一識別碼             |
| `type_name`   | VARCHAR   | 類型名稱（如 MagSafe 兼容）  |
| `created_at`  | TIMESTAMP | 類型資料的建立時間           |

索引設計：
- `id` 為主鍵，自動建立索引。
- `type_name` 上加索引，優化基於類型的查詢。

#### 2.3. `PHONE_TYPE` (手機與殼類型的關聯)
- **功能**: 對應手機和手機殼的類型。
- **正規化**: 通過聯合鍵達成多對多關聯，符合第三正規化。

| 欄位名稱      | 資料型別  | 說明                          |
|---------------|-----------|-------------------------------|
| `id`          | INT PK    | 唯一識別碼                    |
| `phone_id`    | INT FK    | 外鍵，指向 `PHONE` 表         |
| `type_id`     | INT FK    | 外鍵，指向 `TYPE` 表          |
| `created_at`  | TIMESTAMP | 關聯建立時間                  |

索引設計：
- `phone_id` 和 `type_id` 為外鍵，上加聯合索引，優化查詢某款手機對應的所有類型。

#### 2.4. `MANUFACTURER` (製造商)
- **功能**: 儲存製造商資訊。
- **正規化**: 製造商資料拆分為獨立表格，避免資料重複。

| 欄位名稱     | 資料型別  | 說明                          |
|--------------|-----------|-------------------------------|
| `id`         | INT PK    | 製造商的唯一識別碼            |
| `name`       | VARCHAR   | 製造商名稱                    |
| `created_at` | TIMESTAMP | 製造商資料的建立時間          |

索引設計：
- `id` 為主鍵，自動建立索引。
- `name` 上建立索引，便於快速查找製造商。

#### 2.5. `COLOR` (顏色)
- **功能**: 儲存可供手機及手機殼使用的顏色。
- **正規化**: 每種顏色定義一次，避免冗餘。

| 欄位名稱     | 資料型別  | 說明                          |
|--------------|-----------|-------------------------------|
| `id`         | INT PK    | 顏色的唯一識別碼              |
| `color`      | VARCHAR   | 顏色名稱（如黑色、白色）      |
| `created_at` | TIMESTAMP | 顏色資料的建立時間            |

索引設計：
- `id` 為主鍵，自動建立索引。
- `color` 上建立索引，便於按顏色查詢。

#### 2.6. `PHONE_COLOR` (手機與顏色的關聯)
- **功能**: 儲存手機與可選顏色之間的對應關係。
- **正規化**: 用於連接 `PHONE` 和 `COLOR` 表，符合第三正規化。

| 欄位名稱      | 資料型別  | 說明                          |
|---------------|-----------|-------------------------------|
| `id`          | INT PK    | 唯一識別碼                    |
| `phone_id`    | INT FK    | 外鍵，指向 `PHONE` 表         |
| `color_id`    | INT FK    | 外鍵，指向 `COLOR` 表         |
| `created_at`  | TIMESTAMP | 關聯建立時間                  |

索引設計：
- `phone_id` 和 `color_id` 為外鍵，上加聯合索引，優化查詢某手機的所有顏色。

#### 2.7. `SHIELD` (手機殼)
- **功能**: 儲存手機殼的詳細資料，包括手機型號、殼類型、顏色與庫存數量。
- **正規化**: 手機殼資料直接關聯手機、類型與顏色，並將庫存直接關聯至每款殼。

| 欄位名稱      | 資料型別  | 說明                          |
|---------------|-----------|-------------------------------|
| `id`          | INT PK    | 手機殼的唯一識別碼            |
| `phone_id`    | INT FK    | 外鍵，指向 `PHONE` 表         |
| `type_id`     | INT FK    | 外鍵，指向 `TYPE` 表          |
| `color_id`    | INT FK    | 外鍵，指向 `COLOR` 表         |
| `inventory`   | INT       | 該手機殼的庫存數量            |
| `created_at`  | TIMESTAMP | 手機殼資料的建立時間          |

索引設計：
- `phone_id`, `type_id`, `color_id` 上加聯合索引，優化基於手機、類型和顏色的手機殼查詢。
- `inventory` 上可加索引，以優化庫存查詢。

### 3. **資料庫設計考量**

#### 3.1. **正規化**
所有表格設計已符合 **第三正規化 (3NF)**，主要考量：
- 移除重複的資料（如製造商、顏色、類型）並放置於各自的表格中，減少數據冗餘。
- 將多對多的關聯（如手機與顏色，手機與類型）通過中間關聯表來實現，避免多對多直接關聯帶來的重複和更新困難。

#### 3.2. **索引設計**
- 所有主鍵 (`id`) 自動建立索引，以保證唯一性和查詢性能。
- 對外鍵進行聯合索引，尤其是多對多關聯表，這樣可以優化連表查詢性能。
- 對可能進行頻繁查詢的欄位（如 `name`, `type_name`, `color` 等）加上單一索引，進一步提升查詢效率。

#### 3.3. **資料完整性**
- 外鍵設置確保資料的參照完整性，避免無效的數據關聯。
- `TIMESTAMP` 欄位提供建立時間的追踪，方便日後查詢和分析。

#### 3.4. **擴展性**
設計上考量了將來的擴展需求，例如未來可以輕鬆新增新的手機顏色、手機殼類型或製造商，而不會影響現有資料結構。
